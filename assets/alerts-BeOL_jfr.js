import{b as E,R as X,f as xs,t as e,y as gs,B as ps,v as fs}from"./index-cMNJPoS_.js";import{b as We,S as Ge,a as ze,C as K,u as js,A as vs,H as ys}from"./HelpIcon-DHeBXXpJ.js";import{ac as Le,aw as bs,ax as Cs,l as q,m as G,u as ws,ah as ks,B as A,ay as Is,a9 as zs,x as le,y as ce,U as fe,z as je,aq as He,ar as Ps,az as Ke,E as ie,F as Re,A as $e,G as Ne,as as Ss,ai as Ls,at as Rs,au as $s,j as qe,q as Ns,aA as As,aB as Ze,aC as _s,L as R,H as Qe,T as k,X as J,N as Ts,V as Xe,K as Ae,S as V,$ as Ms,P as pe,a0 as ne,W as Pe,am as Ds,O as Ye,Q as Es,R as Bs,a4 as we,a7 as Fs,Y as te,Z as Fe,a3 as ke}from"./dashboardStore-nygBH_uz.js";import{j as me,c as Je,d as Us,m as Vs,e as xe,f as Os,h as es,C as oe,g as Ws,A as Ue,I as Gs}from"./proxy-CbJNOaWr.js";import{T as Se,I as ss,a as Hs}from"./IconSearch-Dmm0wqgn.js";import{T as W}from"./Table-ONRllMQO.js";function Q(s,r){const t=r-s+1;return Array.from({length:t},(n,a)=>a+s)}const ge="dots";function Ks({total:s,siblings:r=1,boundaries:t=1,page:n,initialPage:a=1,onChange:o}){const c=Math.max(Math.trunc(s),0),[l,y]=Le({value:n,onChange:o,defaultValue:a,finalValue:a}),x=f=>{f<=0?y(1):f>c?y(c):y(f)},h=()=>x(l+1),j=()=>x(l-1),b=()=>x(1),p=()=>x(c);return{range:E.useMemo(()=>{if(r*2+3+t*2>=c)return Q(1,c);const C=Math.max(l-r,t),$=Math.min(l+r,c-t),L=C>t+2,I=$<c-(t+1);if(!L&&I){const M=r*2+t+2;return[...Q(1,M),ge,...Q(c-(t-1),c)]}if(L&&!I){const M=t+1+2*r;return[...Q(1,t),ge,...Q(c-M,c)]}return[...Q(1,t),ge,...Q(C,$),ge,...Q(c-t+1,c)]},[c,r,l]),active:l,setPage:x,next:h,previous:j,first:b,last:p}}function qs(s){if(!s||typeof s=="string")return 0;const r=s/36;return Math.round((4+15*r**.25+r/5)*10)}function Ie(s){return s!=null&&s.current?s.current.scrollHeight:"auto"}const re=typeof window<"u"&&window.requestAnimationFrame,Ve=0,Zs=s=>({height:0,overflow:"hidden",...s?{}:{display:"none"}});function Qs({transitionDuration:s,transitionTimingFunction:r="ease",onTransitionEnd:t=()=>{},opened:n,keepMounted:a=!1}){const o=E.useRef(null),c=Zs(a),[l,y]=E.useState(n?{}:c),x=d=>{xs.flushSync(()=>y(d))},h=d=>{x(f=>({...f,...d}))};function j(d){const f=s||qs(d);return{transition:`height ${f}ms ${r}, opacity ${f}ms ${r}`}}bs(()=>{typeof re=="function"&&re(n?()=>{h({willChange:"height",display:"block",overflow:"hidden"}),re(()=>{const d=Ie(o);h({...j(d),height:d})})}:()=>{const d=Ie(o);h({...j(d),willChange:"height",height:d}),re(()=>h({height:Ve,overflow:"hidden"}))})},[n]);const b=d=>{if(!(d.target!==o.current||d.propertyName!=="height"))if(n){const f=Ie(o);f===l.height?x({}):h({height:f}),t()}else l.height===Ve&&(x(c),t())};function p({style:d={},refKey:f="ref",...C}={}){const $=C[f],L={"aria-hidden":!n,...C,[f]:Cs(o,$),onTransitionEnd:b,style:{boxSizing:"border-box",...d,...l}};return X.version.startsWith("18")?n||(L.inert=""):L.inert=!n,L}return p}const Xs={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},ts=q((s,r)=>{const{children:t,in:n,transitionDuration:a,transitionTimingFunction:o,style:c,onTransitionEnd:l,animateOpacity:y,keepMounted:x,...h}=G("Collapse",Xs,s),j=ws(),b=ks(),d=(j.respectReducedMotion?b:!1)?0:a,f=Qs({opened:n,transitionDuration:d,transitionTimingFunction:o,onTransitionEnd:l,keepMounted:x});return d===0?n?e.jsx(A,{...h,children:t}):null:e.jsx(A,{...f({style:{opacity:n||!y?1:0,transition:y?`opacity ${d}ms ${o}`:"none",...Is(c,j)},ref:r,...h}),children:t})});ts.displayName="@mantine/core/Collapse";const rs=E.createContext(null),Ys=rs.Provider,ns=()=>E.useContext(rs),[Js,et]=zs();var os={card:"m_26775b0a"};const st={withBorder:!0},tt=ce((s,{radius:r})=>({card:{"--card-radius":je(r)}})),_e=q((s,r)=>{const t=G("CheckboxCard",st,s),{classNames:n,className:a,style:o,styles:c,unstyled:l,vars:y,checked:x,mod:h,withBorder:j,value:b,onClick:p,defaultChecked:d,onChange:f,attributes:C,...$}=t,L=le({name:"CheckboxCard",classes:os,props:t,className:a,style:o,classNames:n,styles:c,unstyled:l,attributes:C,vars:y,varsResolver:tt,rootSelector:"card"}),I=ns(),M=typeof x=="boolean"?x:I?I.value.includes(b||""):void 0,[P,B]=Le({value:M,defaultValue:d,finalValue:!1,onChange:f});return e.jsx(Js,{value:{checked:P},children:e.jsx(fe,{ref:r,mod:[{"with-border":j,checked:P},h],...L("card"),...$,role:"checkbox","aria-checked":P,onClick:U=>{p==null||p(U),I==null||I.onChange(b||""),B(!P)}})})});_e.displayName="@mantine/core/CheckboxCard";_e.classes=os;const Te=q((s,r)=>{const{value:t,defaultValue:n,onChange:a,size:o,wrapperProps:c,children:l,readOnly:y,...x}=G("CheckboxGroup",null,s),[h,j]=Le({value:t,defaultValue:n,finalValue:[],onChange:a}),b=p=>{const d=typeof p=="string"?p:p.currentTarget.value;!y&&j(h.includes(d)?h.filter(f=>f!==d):[...h,d])};return e.jsx(Ys,{value:{value:h,onChange:b,size:o},children:e.jsx(He.Wrapper,{size:o,ref:r,...c,...x,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(Ps,{role:"group",children:l})})})});Te.classes=He.Wrapper.classes;Te.displayName="@mantine/core/CheckboxGroup";var as={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const rt={icon:We},nt=ce((s,{radius:r,color:t,size:n,iconColor:a,variant:o,autoContrast:c})=>{const l=Ke({color:t||s.primaryColor,theme:s}),y=l.isThemeColor&&l.shade===void 0?`var(--mantine-color-${l.color}-outline)`:l.color;return{indicator:{"--checkbox-size":$e(n,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:je(r),"--checkbox-color":o==="outline"?y:ie(t,s),"--checkbox-icon-color":a?ie(a,s):Ne(c,s)?Re({color:t,theme:s,autoContrast:c}):void 0}}}),Me=q((s,r)=>{const t=G("CheckboxIndicator",rt,s),{classNames:n,className:a,style:o,styles:c,unstyled:l,vars:y,icon:x,indeterminate:h,radius:j,color:b,iconColor:p,autoContrast:d,checked:f,mod:C,variant:$,disabled:L,attributes:I,...M}=t,P=le({name:"CheckboxIndicator",classes:as,props:t,className:a,style:o,classNames:n,styles:c,unstyled:l,attributes:I,vars:y,varsResolver:nt,rootSelector:"indicator"}),B=et(),U=typeof f=="boolean"||typeof h=="boolean"?f||h:(B==null?void 0:B.checked)||!1;return e.jsx(A,{ref:r,...P("indicator",{variant:$}),variant:$,mod:[{checked:U,disabled:L},C],...M,children:e.jsx(x,{indeterminate:h,...P("icon")})})});Me.displayName="@mantine/core/CheckboxIndicator";Me.classes=as;var is={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const ot={labelPosition:"right",icon:We},at=ce((s,{radius:r,color:t,size:n,iconColor:a,variant:o,autoContrast:c})=>{const l=Ke({color:t||s.primaryColor,theme:s}),y=l.isThemeColor&&l.shade===void 0?`var(--mantine-color-${l.color}-outline)`:l.color;return{root:{"--checkbox-size":$e(n,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:je(r),"--checkbox-color":o==="outline"?y:ie(t,s),"--checkbox-icon-color":a?ie(a,s):Ne(c,s)?Re({color:t,theme:s,autoContrast:c}):void 0}}}),ee=q((s,r)=>{const t=G("Checkbox",ot,s),{classNames:n,className:a,style:o,styles:c,unstyled:l,vars:y,color:x,label:h,id:j,size:b,radius:p,wrapperProps:d,checked:f,labelPosition:C,description:$,error:L,disabled:I,variant:M,indeterminate:P,icon:B,rootRef:U,iconColor:O,onChange:i,autoContrast:g,mod:u,attributes:v,...F}=t,w=ns(),D=b||(w==null?void 0:w.size),_=le({name:"Checkbox",props:t,classes:is,className:a,style:o,classNames:n,styles:c,unstyled:l,attributes:v,vars:y,varsResolver:at}),{styleProps:m,rest:N}=Ss(F),z=Ls(j),T=w?{checked:w.value.includes(N.value),onChange:se=>{w.onChange(se),i==null||i(se)}}:{},S=E.useRef(null),H=r||S;return E.useEffect(()=>{H&&"current"in H&&H.current&&(H.current.indeterminate=P||!1)},[P,H]),e.jsx(Rs,{..._("root"),__staticSelector:"Checkbox",__stylesApiProps:t,id:z,size:D,labelPosition:C,label:h,description:$,error:L,disabled:I,classNames:n,styles:c,unstyled:l,"data-checked":T.checked||f||void 0,variant:M,ref:U,mod:u,...m,...d,children:e.jsxs(A,{..._("inner"),mod:{"data-label-position":C},children:[e.jsx(A,{component:"input",id:z,ref:H,checked:f,disabled:I,mod:{error:!!L,indeterminate:P},..._("input",{focusable:!0,variant:M}),onChange:i,...N,...T,type:"checkbox"}),e.jsx(B,{indeterminate:P,..._("icon")})]})})});ee.classes={...is,...$s};ee.displayName="@mantine/core/Checkbox";ee.Group=Te;ee.Indicator=Me;ee.Card=_e;const[it,lt]=qe("List component was not found in tree");var De={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Ee=q((s,r)=>{const t=G("ListItem",null,s),{classNames:n,className:a,style:o,styles:c,vars:l,icon:y,children:x,mod:h,...j}=t,b=lt(),p=y||b.icon,d={classNames:n,styles:c};return e.jsx(A,{...b.getStyles("item",{...d,className:a,style:o}),component:"li",mod:[{"with-icon":!!p,centered:b.center},h],ref:r,...j,children:e.jsxs("div",{...b.getStyles("itemWrapper",d),children:[p&&e.jsx("span",{...b.getStyles("itemIcon",d),children:p}),e.jsx("span",{...b.getStyles("itemLabel",d),children:x})]})})});Ee.classes=De;Ee.displayName="@mantine/core/ListItem";const ct={type:"unordered"},dt=ce((s,{size:r,spacing:t})=>({root:{"--list-fz":Ze(r),"--list-lh":As(r),"--list-spacing":Ns(t)}})),Y=q((s,r)=>{const t=G("List",ct,s),{classNames:n,className:a,style:o,styles:c,unstyled:l,vars:y,children:x,type:h,withPadding:j,icon:b,spacing:p,center:d,listStyleType:f,mod:C,attributes:$,...L}=t,I=le({name:"List",classes:De,props:t,className:a,style:o,classNames:n,styles:c,unstyled:l,attributes:$,vars:y,varsResolver:dt});return e.jsx(it,{value:{center:d,icon:b,getStyles:I},children:e.jsx(A,{...I("root",{style:{listStyleType:f}}),component:h==="unordered"?"ul":"ol",mod:[{"with-padding":j},C],ref:r,...L,children:x})})});Y.classes=De;Y.displayName="@mantine/core/List";Y.Item=Ee;const[ht,ve]=qe("Pagination.Root component was not found in tree");var de={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const ut={withPadding:!0},he=q((s,r)=>{const t=G("PaginationControl",ut,s),{classNames:n,className:a,style:o,styles:c,vars:l,active:y,disabled:x,withPadding:h,mod:j,...b}=t,p=ve(),d=x||p.disabled;return e.jsx(fe,{ref:r,disabled:d,mod:[{active:y,disabled:d,"with-padding":h},j],...p.getStyles("control",{className:a,style:o,classNames:n,styles:c,active:!d}),...b})});he.classes=de;he.displayName="@mantine/core/PaginationControl";function ue({style:s,children:r,path:t,...n}){return e.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...s},...n,children:e.jsx("path",{d:t,fill:"currentColor"})})}const mt=s=>e.jsx(ue,{...s,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),xt=s=>e.jsx(ue,{...s,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),gt=s=>e.jsx(ue,{...s,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),pt=s=>e.jsx(ue,{...s,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),ft=s=>e.jsx(ue,{...s,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),jt={icon:ft},ye=q((s,r)=>{const t=G("PaginationDots",jt,s),{classNames:n,className:a,style:o,styles:c,vars:l,icon:y,...x}=t,h=ve();return e.jsx(A,{ref:r,...h.getStyles("dots",{className:a,style:o,styles:c,classNames:n}),...x,children:e.jsx(y,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});ye.classes=de;ye.displayName="@mantine/core/PaginationDots";function be({icon:s,name:r,action:t,type:n}){const a={icon:s},o=E.forwardRef((c,l)=>{const{icon:y,...x}=G(r,a,c),h=ve(),j=n==="next"?h.active===h.total:h.active===1;return e.jsx(he,{disabled:h.disabled||j,ref:l,onClick:h[t],withPadding:!1,...x,children:e.jsx(y,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return o.displayName=`@mantine/core/${r}`,_s(o)}const ls=be({icon:mt,name:"PaginationNext",action:"onNext",type:"next"}),cs=be({icon:xt,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),ds=be({icon:gt,name:"PaginationFirst",action:"onFirst",type:"previous"}),hs=be({icon:pt,name:"PaginationLast",action:"onLast",type:"next"});function Be({dotsIcon:s}){const r=ve(),t=r.range.map((n,a)=>{var o,c,l;return n==="dots"?e.jsx(ye,{icon:s},a):e.jsx(he,{active:n===r.active,"aria-current":n===r.active?"page":void 0,onClick:()=>r.onChange(n),disabled:r.disabled,...(o=r.getItemProps)==null?void 0:o.call(r,n),children:((l=(c=r.getItemProps)==null?void 0:c.call(r,n))==null?void 0:l.children)??n},a)});return e.jsx(e.Fragment,{children:t})}Be.displayName="@mantine/core/PaginationItems";const vt={siblings:1,boundaries:1},yt=ce((s,{size:r,radius:t,color:n,autoContrast:a})=>({root:{"--pagination-control-radius":t===void 0?void 0:je(t),"--pagination-control-size":$e(r,"pagination-control-size"),"--pagination-control-fz":Ze(r),"--pagination-active-bg":n?ie(n,s):void 0,"--pagination-active-color":Ne(a,s)?Re({color:n,theme:s,autoContrast:a}):void 0}})),Ce=q((s,r)=>{const t=G("PaginationRoot",vt,s),{classNames:n,className:a,style:o,styles:c,unstyled:l,vars:y,total:x,value:h,defaultValue:j,onChange:b,disabled:p,siblings:d,boundaries:f,color:C,radius:$,onNextPage:L,onPreviousPage:I,onFirstPage:M,onLastPage:P,getItemProps:B,autoContrast:U,attributes:O,...i}=t,g=le({name:"Pagination",classes:de,props:t,className:a,style:o,classNames:n,styles:c,unstyled:l,attributes:O,vars:y,varsResolver:yt}),{range:u,setPage:v,next:F,previous:w,active:D,first:_,last:m}=Ks({page:h,initialPage:j,onChange:b,total:x,siblings:d,boundaries:f}),N=me(L,F),z=me(I,w),T=me(M,_),S=me(P,m);return e.jsx(ht,{value:{total:x,range:u,active:D,disabled:p,getItemProps:B,onChange:v,onNext:N,onPrevious:z,onFirst:T,onLast:S,getStyles:g},children:e.jsx(A,{ref:r,...g("root"),...i})})});Ce.classes=de;Ce.displayName="@mantine/core/PaginationRoot";const bt={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},Z=q((s,r)=>{const t=G("Pagination",bt,s),{withEdges:n,withControls:a,getControlProps:o,nextIcon:c,previousIcon:l,lastIcon:y,firstIcon:x,dotsIcon:h,total:j,gap:b,hideWithOnePage:p,withPages:d,...f}=t;return j<=0||p&&j===1?null:e.jsx(Ce,{ref:r,total:j,...f,children:e.jsxs(R,{gap:b,children:[n&&e.jsx(ds,{icon:x,...o==null?void 0:o("first")}),a&&e.jsx(cs,{icon:l,...o==null?void 0:o("previous")}),d&&e.jsx(Be,{dotsIcon:h}),a&&e.jsx(ls,{icon:c,...o==null?void 0:o("next")}),n&&e.jsx(hs,{icon:y,...o==null?void 0:o("last")})]})})});Z.classes=de;Z.displayName="@mantine/core/Pagination";Z.Root=Ce;Z.Control=he;Z.Dots=ye;Z.First=ds;Z.Last=hs;Z.Next=ls;Z.Previous=cs;Z.Items=Be;/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],us=Qe("outline","chevron-up","ChevronUp",Ct);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]],Oe=Qe("outline","external-link","ExternalLink",wt);function kt({data:s,columns:r,actions:t=[],selectable:n=!1,sortable:a=!0,filterable:o=!0,pagination:c=!0,pageSize:l=10,loading:y=!1,onSelectionChange:x,onSort:h,onFilter:j,emptyText:b="No data available"}){const[p,d]=E.useState(new Set),[f,C]=E.useState(null),[$,L]=E.useState("asc"),[I,M]=E.useState({}),[P,B]=E.useState(1),[U,O]=E.useState(""),i=m=>{var z;if(!a||!((z=r.find(T=>T.key===m))!=null&&z.sortable))return;const N=f===m&&$==="asc"?"desc":"asc";C(m),L(N),h==null||h(m,N)},g=()=>{if(p.size===v.length)d(new Set),x==null||x([]);else{const m=new Set(v.map((N,z)=>z.toString()));d(m),x==null||x(v)}},u=m=>{const N=m.toString(),z=new Set(p);z.has(N)?z.delete(N):z.add(N),d(z);const T=Array.from(z).map(S=>v[parseInt(S)]);x==null||x(T)},v=E.useMemo(()=>{let m=[...s];return U.trim()&&(m=m.filter(N=>r.some(z=>{const T=N[z.key];return T==null?void 0:T.toString().toLowerCase().includes(U.toLowerCase())}))),Object.entries(I).forEach(([N,z])=>{z.trim()&&(m=m.filter(T=>{const S=T[N];return S==null?void 0:S.toString().toLowerCase().includes(z.toLowerCase())}))}),f&&m.sort((N,z)=>{const T=N[f],S=z[f];return T<S?$==="asc"?-1:1:T>S?$==="asc"?1:-1:0}),m},[s,U,I,f,$,r]),F=E.useMemo(()=>{if(!c)return v;const m=(P-1)*l;return v.slice(m,m+l)},[v,P,l,c]),w=Math.ceil(v.length/l),D=m=>f!==m?null:$==="asc"?e.jsx(us,{size:14}):e.jsx(es,{size:14}),_=(m,N)=>{const z={...I,[m]:N};M(z),B(1),j==null||j(z)};return e.jsxs(A,{children:[(o||n)&&e.jsxs(R,{justify:"space-between",mb:"md",children:[e.jsx(R,{gap:"md",children:o&&e.jsx(Se,{placeholder:"Search across all columns...",leftSection:e.jsx(ss,{size:16}),value:U,onChange:m=>{O(m.target.value),B(1)},style:{minWidth:250}})}),n&&p.size>0&&e.jsxs(R,{gap:"xs",children:[e.jsxs(k,{size:"sm",c:"dimmed",children:[p.size," selected"]}),e.jsxs(J.Group,{children:[e.jsx(J,{variant:"light",size:"xs",leftSection:e.jsx(Je,{size:14}),children:"Export"}),e.jsx(J,{variant:"light",size:"xs",color:"red",leftSection:e.jsx(Us,{size:14}),children:"Delete"})]})]})]}),e.jsx(Ts,{children:e.jsxs(W,{highlightOnHover:!0,striped:!0,children:[e.jsx(W.Thead,{children:e.jsxs(W.Tr,{children:[n&&e.jsx(W.Th,{w:40,children:e.jsx(ee,{checked:p.size===v.length&&v.length>0,indeterminate:p.size>0&&p.size<v.length,onChange:g})}),r.map(m=>e.jsxs(W.Th,{w:m.width,style:{textAlign:m.align||"left"},children:[e.jsxs(R,{gap:"xs",style:{cursor:m.sortable&&a?"pointer":"default",justifyContent:m.align==="center"?"center":m.align==="right"?"flex-end":"flex-start"},onClick:()=>m.sortable&&i(m.key),children:[e.jsx(k,{size:"sm",fw:600,children:m.label}),m.sortable&&D(m.key)]}),m.filterable&&o&&e.jsx(Se,{size:"xs",placeholder:`Filter ${m.label.toLowerCase()}...`,value:I[m.key]||"",onChange:N=>_(m.key,N.target.value),mt:4,leftSection:e.jsx(Hs,{size:12})})]},m.key)),t.length>0&&e.jsx(W.Th,{w:60,children:"Actions"})]})}),e.jsx(W.Tbody,{children:F.length===0?e.jsx(W.Tr,{children:e.jsx(W.Td,{colSpan:r.length+(n?1:0)+(t.length>0?1:0),children:e.jsx(A,{ta:"center",py:"xl",children:e.jsx(k,{size:"sm",c:"dimmed",children:b})})})}):F.map((m,N)=>{const z=(P-1)*l+N,T=p.has(z.toString());return e.jsxs(Vs.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.02},style:{backgroundColor:T?"var(--mantine-color-blue-0)":void 0},children:[n&&e.jsx(W.Td,{children:e.jsx(ee,{checked:T,onChange:()=>u(z)})}),r.map(S=>{var H;return e.jsx(W.Td,{style:{textAlign:S.align||"left"},children:S.render?S.render(m[S.key],m):e.jsx(k,{size:"sm",children:((H=m[S.key])==null?void 0:H.toString())||"-"})},S.key)}),t.length>0&&e.jsx(W.Td,{children:e.jsxs(xe,{shadow:"md",width:200,children:[e.jsx(xe.Target,{children:e.jsx(Xe,{variant:"subtle",size:"sm",children:e.jsx(Os,{size:16})})}),e.jsx(xe.Dropdown,{children:t.map((S,H)=>{var se;return e.jsx(xe.Item,{leftSection:S.icon,color:S.color,disabled:(se=S.disabled)==null?void 0:se.call(S,m),onClick:()=>S.onClick(m),children:S.label},H)})})]})})]},z)})})]})}),c&&w>1&&e.jsxs(R,{justify:"space-between",mt:"md",children:[e.jsxs(k,{size:"sm",c:"dimmed",children:["Showing ",(P-1)*l+1," to"," ",Math.min(P*l,v.length)," of"," ",v.length," entries"]}),e.jsxs(R,{gap:"sm",children:[e.jsx(Ge,{size:"sm",value:l.toString(),onChange:m=>{},data:[{value:"10",label:"10 per page"},{value:"25",label:"25 per page"},{value:"50",label:"50 per page"},{value:"100",label:"100 per page"}],w:130}),e.jsx(Z,{value:P,onChange:B,total:w,size:"sm"})]})]})]})}function ae({label:s,icon:r,color:t="gray",size:n="md",variant:a="soft",count:o,active:c=!1,onClick:l,style:y,className:x}){const{colorScheme:h}=Ae(),j=n==="sm"?22:28,b=n==="sm"?8:10,p=n==="sm"?6:8,d=X.useMemo(()=>a==="ghost"?{bg:"transparent",border:"transparent",text:`var(--mantine-color-${t}-7)`,hoverBg:h==="dark"?`var(--mantine-color-${t}-9)`:`var(--mantine-color-${t}-0)`}:a==="outline"?{bg:"transparent",border:h==="dark"?`var(--mantine-color-${t}-7)`:`var(--mantine-color-${t}-4)`,text:h==="dark"?`var(--mantine-color-${t}-2)`:`var(--mantine-color-${t}-7)`,hoverBg:h==="dark"?`var(--mantine-color-${t}-9)`:`var(--mantine-color-${t}-0)`}:{bg:h==="dark"?`var(--mantine-color-${t}-9)`:`var(--mantine-color-${t}-0)`,border:h==="dark"?`var(--mantine-color-${t}-7)`:`var(--mantine-color-${t}-3)`,text:h==="dark"?`var(--mantine-color-${t}-2)`:`var(--mantine-color-${t}-7)`,hoverBg:h==="dark"?`var(--mantine-color-${t}-8)`:`var(--mantine-color-${t}-1)`},[t,a,h]),f=e.jsxs(R,{gap:p,align:"center",style:{height:j,paddingInline:b,borderRadius:9999,border:`1px solid ${d.border}`,backgroundColor:d.bg,color:d.text,transition:"background-color 150ms ease, border-color 150ms ease, transform 150ms ease",boxShadow:c?"inset 0 0 0 1px var(--mantine-color-primary-6)":void 0,...y},className:x,children:[r,typeof s=="string"?e.jsx(k,{size:n==="sm"?"xs":"sm",style:{color:"inherit",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},maw:typeof maxLabelWidth<"u"?maxLabelWidth:void 0,children:s}):s,typeof o=="number"&&e.jsx(A,{style:{marginLeft:2,minWidth:n==="sm"?16:18,height:n==="sm"?16:18,borderRadius:9999,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:`var(--mantine-color-${t}-6)`,color:"var(--mantine-color-white)",fontSize:n==="sm"?10:11,paddingInline:6},children:o})]});return l?e.jsx(fe,{onClick:l,style:{borderRadius:9999},children:f}):e.jsx(A,{children:f})}function It({items:s,onSelect:r,title:t="Top KSI families"}){const{colorScheme:n}=Ae();if(!s||s.length===0)return null;const a=Math.max(...s.map(o=>o.count));return e.jsxs(V,{gap:"xs",children:[e.jsxs(k,{size:"xs",c:"dimmed",children:[t,":"]}),e.jsx(ze,{cols:{base:1,sm:2},spacing:"xs",children:s.map(o=>{const c=a>0?Math.max(6,Math.round(o.count/a*100)):0,l=e.jsxs(V,{gap:6,children:[e.jsxs(R,{gap:6,justify:"space-between",wrap:"nowrap",children:[e.jsx(k,{size:"sm",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.label}),e.jsx(oe,{style:{fontSize:"var(--mantine-font-size-xs)"},children:o.count})]}),e.jsx(Ws,{value:c,size:"xs",radius:"xl",styles:{root:{background:n==="dark"?"var(--mantine-color-dark-6)":"var(--mantine-color-gray-1)"}}})]});return r?e.jsx(fe,{onClick:()=>r==null?void 0:r(o.id),style:{width:"100%",borderRadius:10,border:`1px solid ${n==="dark"?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-3)"}`,padding:10,transition:"background-color 120ms ease, transform 120ms ease, border-color 120ms ease"},children:l},o.id):e.jsx(A,{style:{width:"100%",borderRadius:10,border:`1px solid ${n==="dark"?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-3)"}`,padding:10},children:l},o.id)})})]})}function zt(s,r,t){if(!s.results||s.results.length===0)return null;const n=s.results.filter(c=>c.status==="alarm"),a=s.results.filter(c=>c.status==="error"),o=n.length+a.length;return o===0?null:{id:s.control_id||`control-${Math.random().toString(36).substr(2,9)}`,title:s.title||"Unnamed Control",controlId:s.control_id||"",category:r,categoryId:t,alarmResults:n,errorResults:a,totalIssues:o}}function ms(s,r,t,n){const a=[];if(s.controls)for(const o of s.controls){const c=zt(o,n??s.title,t??s.group_id);if(c&&(a.push(c),r&&a.length>=r))break}if(s.groups&&(!r||a.length<r))for(const o of s.groups){const c=ms(o,r?r-a.length:void 0,t??s.group_id,n??s.title);if(a.push(...c),r&&a.length>=r)break}return a}function Pt(s,r=20){const t=[];for(const n of s){const a=ms(n,r-t.length,n.group_id,n.title);if(t.push(...a),t.length>=r)break}return t.sort((n,a)=>n.errorResults.length>0&&a.errorResults.length===0?-1:a.errorResults.length>0&&n.errorResults.length===0?1:a.totalIssues-n.totalIssues).slice(0,r)}function St({id:s,title:r,controlId:t,category:n,alarmResults:a=[],errorResults:o=[],timestamp:c,onDismiss:l,onAction:y,isDismissible:x=!0,density:h="comfortable"}){const[j,b]=E.useState(!1),[p,d]=E.useState(!1);Ae();const f=h==="compact"?"sm":"md",C=v=>{const F=v.reduce((w,D)=>{const _=D.reason||"Unknown issue";return w[_]||(w[_]={reason:_,status:D.status,resources:[]}),D.resource&&w[_].resources.push({resource:D.resource,dimensions:D.dimensions}),w},{});return Object.values(F)},$=C(a),L=C(o),I=a.length+o.length,M=a.length>0,P=o.length>0,O={error:{color:"grape",icon:ne,bgColor:"grape.0",borderColor:"grape.3",pulse:!0},alarm:{color:"red",icon:pe,bgColor:"red.0",borderColor:"red.3",pulse:!0},info:{color:"blue",icon:Ms,bgColor:"blue.0",borderColor:"blue.3",pulse:!1}}[P?"error":M?"alarm":"info"],i=O.icon,g=()=>{d(!0),setTimeout(()=>{l==null||l(s)},300)},u=v=>{if(v.includes("gitlab")){const F=v.split("/");return F[F.length-1]||v}return v};return I===0||p?null:e.jsxs(K,{shadow:"sm",padding:f,radius:"md",withBorder:!0,className:"relative overflow-hidden",style:{borderLeft:`3px solid var(--mantine-color-${O.color}-6)`},children:[e.jsxs(R,{justify:"space-between",mb:"xs",align:"flex-start",children:[e.jsxs(R,{gap:"sm",align:"flex-start",style:{flex:1},children:[e.jsx(Pe,{color:O.color,variant:"light",size:"md",radius:"md",children:e.jsx(i,{size:18})}),e.jsxs(A,{style:{flex:1},children:[e.jsxs(R,{gap:"xs",wrap:"nowrap",children:[e.jsx(k,{size:"sm",fw:600,style:{flex:1},children:r}),P&&e.jsx(ae,{label:`${o.length} errors`,color:"grape",size:"sm"}),M&&e.jsx(ae,{label:`${a.length} alarms`,color:"red",size:"sm"}),n&&e.jsx(ae,{label:n,color:"gray",size:"sm",variant:"outline",maxLabelWidth:240})]}),e.jsxs(R,{gap:"xs",mt:2,children:[t&&e.jsx(oe,{c:"dimmed",style:{fontSize:"var(--mantine-font-size-xs)"},children:t}),c&&e.jsx(k,{size:"xs",c:"dimmed",children:c})]})]})]}),x&&e.jsx(Ds,{size:"sm",onClick:g,"aria-label":"Dismiss alert"})]}),e.jsx(A,{onClick:()=>b(!j),style:{cursor:"pointer"},mb:"sm",children:e.jsxs(R,{justify:"space-between",align:"center",children:[e.jsx(k,{size:"sm",c:"dimmed",fw:500,children:j?"Hide details":`Show details (${I})`}),j?e.jsx(us,{size:16,color:"var(--mantine-color-dimmed)"}):e.jsx(es,{size:16,color:"var(--mantine-color-dimmed)"})]})}),e.jsx(ts,{in:j,children:e.jsxs(V,{gap:h==="compact"?"sm":"md",children:[L.length>0&&e.jsxs(A,{children:[e.jsxs(R,{gap:"xs",mb:"xs",children:[e.jsx(ne,{size:16,color:"var(--mantine-color-grape-6)"}),e.jsxs(k,{size:"sm",fw:600,c:"grape",children:["Errors (",o.length,")"]})]}),e.jsx(V,{gap:h==="compact"?"xs":"sm",children:L.map((v,F)=>e.jsxs(K,{padding:h==="compact"?"xs":"sm",withBorder:!0,children:[e.jsx(k,{size:"sm",mb:"xs",children:v.reason}),v.resources.length>0&&e.jsxs(A,{children:[e.jsxs(k,{size:"xs",c:"dimmed",mb:4,children:["Affected resources (",v.resources.length,"):"]}),e.jsx(Y,{spacing:"xs",size:"sm",children:v.resources.map((w,D)=>e.jsxs(Y.Item,{children:[w.resource.startsWith("http")?e.jsxs(Ue,{href:w.resource,target:"_blank",size:"sm",style:{display:"flex",alignItems:"center",gap:4},children:[u(w.resource),e.jsx(Oe,{size:12})]}):e.jsx(oe,{style:{fontSize:"var(--mantine-font-size-sm)"},children:w.resource}),w.dimensions&&w.dimensions.length>0&&e.jsx(k,{size:"xs",c:"dimmed",mt:2,children:w.dimensions.map(_=>`${_.key}: ${_.value}`).join(", ")})]},D))})]})]},F))})]}),$.length>0&&e.jsxs(A,{children:[L.length>0&&e.jsx(Ye,{}),e.jsxs(R,{gap:"xs",mb:"xs",children:[e.jsx(pe,{size:16,color:"var(--mantine-color-red-6)"}),e.jsxs(k,{size:"sm",fw:600,c:"red",children:["Alarms (",a.length,")"]})]}),e.jsx(V,{gap:h==="compact"?"xs":"sm",children:$.map((v,F)=>e.jsxs(K,{padding:h==="compact"?"xs":"sm",withBorder:!0,children:[e.jsx(k,{size:"sm",mb:"xs",children:v.reason}),v.resources.length>0&&e.jsxs(A,{children:[e.jsxs(k,{size:"xs",c:"dimmed",mb:4,children:["Affected resources (",v.resources.length,"):"]}),e.jsx(Y,{spacing:"xs",size:"sm",children:v.resources.map((w,D)=>e.jsxs(Y.Item,{children:[w.resource.startsWith("http")?e.jsxs(Ue,{href:w.resource,target:"_blank",size:"sm",style:{display:"flex",alignItems:"center",gap:4},children:[u(w.resource),e.jsx(Oe,{size:12})]}):e.jsx(oe,{style:{fontSize:"var(--mantine-font-size-sm)"},children:w.resource}),w.dimensions&&w.dimensions.length>0&&e.jsx(k,{size:"xs",c:"dimmed",mt:2,children:w.dimensions.map(_=>`${_.key}: ${_.value}`).join(", ")})]},D))})]})]},F))})]})]})}),y&&e.jsx(J,{variant:"light",color:O.color,size:h==="compact"?"xs":"sm",mt:h==="compact"?"xs":"sm",rightSection:e.jsx(Gs,{size:14}),onClick:y,children:"View Control Details"})]})}const Lt=Es()(Bs(s=>({dismissedIds:[],dismiss:r=>s(t=>({dismissedIds:t.dismissedIds.includes(r)?t.dismissedIds:[r,...t.dismissedIds].slice(0,500)})),restore:r=>s(t=>({dismissedIds:t.dismissedIds.filter(n=>n!==r)})),clearAll:()=>s({dismissedIds:[]})}),{name:"alerts-storage",partialize:s=>({dismissedIds:s.dismissedIds})})),Mt=()=>[{title:"Alerts Center"},{name:"description",content:"Centralized view of KSI alarms and errors across all KSI families"}],Dt=gs(function(){const{ksiCategories:r,loading:t,error:n}=js(),[a,o]=ps(),c=fs(),{dismissedIds:l,dismiss:y,restore:x,clearAll:h}=Lt(),j=a.get("severity")??"all",b=a.get("category")??"all",p=a.get("q")??"",d=a.get("show")??"active",f=a.get("view")??"list",C=X.useMemo(()=>Pt(r,500).filter(u=>{const v=j==="all"||j==="alarm"&&u.alarmResults.length>0||j==="error"&&u.errorResults.length>0,F=b==="all"||u.categoryId===b,w=p?(u.title||"").toLowerCase().includes(p.toLowerCase())||(u.category||"").toLowerCase().includes(p.toLowerCase()):!0,D=l.includes(u.id);return v&&F&&w&&(d==="all"?!0:d==="dismissed"?D:!D)}),[r,j,b,p,d,l]),$=X.useMemo(()=>{const i=r.map(g=>({value:g.group_id,label:g.title}));return[{value:"all",label:"All KSI families"},...i]},[r]),L=C.reduce((i,g)=>i+g.errorResults.length,0),I=C.reduce((i,g)=>i+g.alarmResults.length,0),M=new Set(C.map(i=>i.categoryId)).size,P=X.useMemo(()=>{const i=new Map;for(const g of C){if(!g.categoryId)continue;const u=g.categoryId,v=i.get(u)??{id:u,title:g.category??u,count:0};v.count+=g.totalIssues,i.set(u,v)}return Array.from(i.values()).sort((g,u)=>u.count-g.count).slice(0,5)},[C]),B=X.useMemo(()=>d==="dismissed"&&l.length===0?"No alerts to restore. You have not dismissed any alerts.":d==="active"&&C.length===0?p||b!=="all"||j!=="all"?"No alerts match the selected filters.":"No alerts to dismiss. All alerts have been processed.":d==="all"&&C.length===0&&l.length===0?"No alerts to manage. All alerts have been processed.":C.length===0?"No alerts match the selected filters.":"",[d,l.length,C,p,b,j]),U=X.useMemo(()=>d==="dismissed"?0:d==="all"?C.filter(i=>!l.includes(i.id)).length:C.length,[d,C,l]),O=X.useMemo(()=>d==="active"?0:l.length,[d,l.length]);return t?e.jsx(we,{size:"lg",py:"xl",children:e.jsxs(R,{justify:"center",mt:"xl",children:[e.jsx(Fs,{}),e.jsx(k,{children:"Loading alerts…"})]})}):n?e.jsx(we,{size:"lg",py:"xl",children:e.jsx(vs,{color:"red",title:"Failed to load data",variant:"light",children:n})}):e.jsx(we,{size:"xl",py:"lg",children:e.jsxs(V,{gap:"lg",children:[e.jsx(K,{withBorder:!0,padding:"md",radius:"md",children:e.jsxs(V,{gap:"sm",children:[e.jsxs(R,{justify:"space-between",align:"center",children:[e.jsxs("div",{children:[e.jsxs(R,{gap:"xs",align:"center",children:[e.jsx(te,{order:2,children:"Alerts Center"}),e.jsx(ys,{tooltip:"This page lists alerts that have detailed result rows. Execution errors that appear in dashboard summaries but do not include per-result details are not shown here. That is why the dashboard 'Errors' total can be higher than the count here.",position:"bottom-start"})]}),e.jsx(R,{gap:6,align:"center",children:e.jsx(k,{c:"dimmed",children:"Focused hub for alarms and errors across all KSI families"})})]}),e.jsxs(R,{gap:"xs",children:[e.jsx(ae,{label:`${L} errors`,color:"grape",size:"md",icon:e.jsx(ne,{size:14})}),e.jsx(ae,{label:`${I} alarms`,color:"red",size:"md",icon:e.jsx(pe,{size:14})})]})]}),e.jsxs(ze,{cols:{base:2,sm:4},spacing:"sm",children:[e.jsx(K,{withBorder:!0,padding:"sm",radius:"md",children:e.jsxs(V,{gap:2,align:"flex-start",children:[e.jsx(k,{size:"xs",c:"dimmed",children:"Errors"}),e.jsxs(R,{gap:6,children:[e.jsx(Pe,{color:"grape",variant:"light",size:"sm",children:e.jsx(ne,{size:14})}),e.jsx(te,{order:4,children:L})]})]})}),e.jsx(K,{withBorder:!0,padding:"sm",radius:"md",children:e.jsxs(V,{gap:2,align:"flex-start",children:[e.jsx(k,{size:"xs",c:"dimmed",children:"Alarms"}),e.jsxs(R,{gap:6,children:[e.jsx(Pe,{color:"red",variant:"light",size:"sm",children:e.jsx(pe,{size:14})}),e.jsx(te,{order:4,children:I})]})]})}),e.jsx(K,{withBorder:!0,padding:"sm",radius:"md",children:e.jsxs(V,{gap:2,align:"flex-start",children:[e.jsx(k,{size:"xs",c:"dimmed",children:"Affected KSI families"}),e.jsx(te,{order:4,children:M})]})}),e.jsx(K,{withBorder:!0,padding:"sm",radius:"md",children:e.jsxs(V,{gap:2,align:"flex-start",children:[e.jsx(k,{size:"xs",c:"dimmed",children:"Visible alerts"}),e.jsx(te,{order:4,children:C.length})]})})]})]})}),e.jsxs(K,{withBorder:!0,padding:"md",radius:"md",children:[e.jsxs(V,{gap:"sm",children:[e.jsxs(R,{justify:"space-between",align:"flex-end",wrap:"wrap",children:[e.jsx(Se,{label:"Search",placeholder:"Search title or KSI family…",leftSection:e.jsx(ss,{size:14}),value:p,onChange:i=>o(g=>{const u=new URLSearchParams(g),v=i.currentTarget.value;return v?u.set("q",v):u.delete("q"),u}),onKeyDown:i=>{i.key==="Escape"&&o(g=>{const u=new URLSearchParams(g);return u.delete("q"),u})},rightSection:p?e.jsx(Xe,{size:"sm",variant:"subtle",onClick:()=>o(i=>{const g=new URLSearchParams(i);return g.delete("q"),g}),children:e.jsx(ne,{size:14})}):void 0,style:{flex:1,minWidth:260,maxWidth:520}}),e.jsxs(R,{gap:"xs",children:[e.jsx(J,{variant:"light",leftSection:e.jsx(Je,{size:16}),onClick:()=>{const i=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),g=URL.createObjectURL(i),u=document.createElement("a");u.href=g,u.download="alerts-export.json",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(g)},children:"Export"}),d!=="dismissed"&&e.jsx(Fe,{label:"No alerts to dismiss",disabled:U>0,children:e.jsx(J,{variant:"subtle",disabled:U===0,onClick:()=>{const i=d==="all"?C.filter(v=>!l.includes(v.id)):C,g=i.length;g<=0||!window.confirm(`Dismiss ${g} visible alert${g===1?"":"s"}?`)||i.forEach(v=>y(v.id))},children:"Dismiss All"})}),d!=="active"&&e.jsx(Fe,{label:"No alerts to restore",disabled:O>0,children:e.jsx(J,{variant:"subtle",disabled:O===0,onClick:()=>{const i=l.length;i<=0||!window.confirm(`Restore all dismissed alerts (${i})?`)||h()},children:"Restore All"})})]})]}),e.jsxs(ze,{cols:{base:1,sm:2,md:3,lg:5},spacing:"sm",children:[e.jsxs(A,{children:[e.jsx(k,{size:"xs",c:"dimmed",mb:4,children:"Severity"}),e.jsx(ke,{value:j,onChange:i=>o(g=>{const u=new URLSearchParams(g);return i?u.set("severity",i):u.delete("severity"),u}),data:[{label:"All",value:"all"},{label:"Errors",value:"error"},{label:"Alarms",value:"alarm"}]})]}),e.jsxs(A,{children:[e.jsx(k,{size:"xs",c:"dimmed",mb:4,children:"KSI Family"}),e.jsx(Ge,{value:b,onChange:i=>o(g=>{const u=new URLSearchParams(g);return i?u.set("category",i):u.delete("category"),u}),data:$,w:"100%"})]}),e.jsxs(A,{children:[e.jsx(k,{size:"xs",c:"dimmed",mb:4,children:"Show"}),e.jsx(ke,{value:d,onChange:i=>o(g=>{const u=new URLSearchParams(g);return i?u.set("show",i):u.delete("show"),u}),data:[{label:"Active",value:"active"},{label:"Dismissed",value:"dismissed"},{label:"All",value:"all"}]})]}),e.jsxs(A,{children:[e.jsx(k,{size:"xs",c:"dimmed",mb:4,children:"View"}),e.jsx(ke,{value:f,onChange:i=>o(g=>{const u=new URLSearchParams(g);return i?u.set("view",i):u.delete("view"),u}),data:[{label:"List",value:"list"},{label:"Table",value:"table"}]})]})]})]}),P.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{my:"sm"}),e.jsx(R,{gap:"xs",wrap:"wrap",children:e.jsx(It,{items:P.map(i=>({id:i.id,label:i.title,count:i.count})),onSelect:i=>o(g=>{const u=new URLSearchParams(g);return u.set("category",i),u})})})]})]}),f==="table"?e.jsx(K,{withBorder:!0,padding:"md",radius:"md",children:e.jsx(kt,{data:C.map(i=>({title:i.title,category:i.category,controlId:i.controlId,errors:i.errorResults.length,alarms:i.alarmResults.length,total:i.totalIssues})),columns:[{key:"title",label:"Title",sortable:!0,width:"40%"},{key:"category",label:"KSI Family",sortable:!0,width:"25%"},{key:"controlId",label:"Control ID",sortable:!0,width:"15%",render:i=>e.jsx(oe,{style:{fontSize:"var(--mantine-font-size-sm)"},children:i})},{key:"errors",label:"Errors",sortable:!0,width:90},{key:"alarms",label:"Alarms",sortable:!0,width:90},{key:"total",label:"Total",sortable:!0,width:90}],pagination:!0,pageSize:10,emptyText:B||"No alerts match the selected filters"})}):e.jsxs(V,{gap:"md",children:[C.length===0&&e.jsx(K,{withBorder:!0,padding:"md",radius:"md",children:e.jsx(k,{c:"dimmed",ta:"center",children:B||"No alerts match the selected filters."})}),C.map(i=>e.jsx(St,{id:i.id,title:i.title,controlId:i.controlId,category:i.category,alarmResults:i.alarmResults,errorResults:i.errorResults,onDismiss:g=>y(g),onAction:()=>{i.categoryId&&c(`/dashboard/${i.categoryId}?control=${encodeURIComponent(i.controlId)}`)}},`${i.id}-${i.controlId}`))]})]})})});export{Dt as default,Mt as meta};
